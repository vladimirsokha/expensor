<div class="recovery-container">
  <div class="recovery-card">
    <div class="brand-section">
      <div class="logo">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        </svg>
      </div>
      <h1 class="brand-title">Reset Password</h1>
      <p class="brand-subtitle">
        @if (!isEmailSent()) {
          Enter your email address to reset your password
        } @else {
          Check your email for password reset instructions
        }
      </p>
    </div>

    @if (!isEmailSent()) {
      <form [formGroup]="recoveryForm" (ngSubmit)="onSubmit()" class="recovery-form">
        <div class="form-group">
          <label for="email" class="form-label">Email Address</label>
          <div class="input-wrapper">
            <input
              type="email"
              id="email"
              formControlName="email"
              class="form-input"
              [class.error]="email?.invalid && email?.touched"
              placeholder="Enter your email address"
            />
            <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          @if (email?.invalid && email?.touched) {
            <div class="error-message">
              @if (email?.errors?.['required']) {
                Email is required
              }
              @if (email?.errors?.['email']) {
                Please enter a valid email address
              }
            </div>
          }
        </div>

        @if (errorMessage()) {
          <div class="error-alert">
            {{ errorMessage() }}
          </div>
        }

        <button
          type="submit"
          class="recovery-button"
          [disabled]="isLoading()"
          [class.loading]="isLoading()"
        >
          @if (isLoading()) {
            <div class="spinner"></div>
            Sending reset link...
          } @else {
            Send Reset Link
          }
        </button>

        <div class="form-footer">
          <a routerLink="/auth/login" class="back-to-login-link">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 12H5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Back to login
          </a>
        </div>
      </form>
    } @else {
      <div class="success-content">
        <div class="success-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M22 11.08V12C21.9985 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.7088 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4905 2.02168 11.3363C2.16356 9.18203 2.99721 7.13214 4.39828 5.49C5.79935 3.84785 7.69279 2.69637 9.79619 2.20421C11.8996 1.71204 14.1003 1.90093 16.07 2.74" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M22 4L12 14.01L9 11.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h2 class="success-title">Email Sent!</h2>
        <p class="success-message">
          We've sent a password reset link to <strong>{{ email?.value }}</strong>. 
          Please check your email and follow the instructions to reset your password.
        </p>
        <p class="success-note">
          Didn't receive the email? Check your spam folder or 
          <button type="button" class="resend-link" (click)="resetForm()">
            try again
          </button>
        </p>
        <div class="success-actions">
          <a routerLink="/auth/login" class="back-button">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 12H5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Back to login
          </a>
        </div>
      </div>
    }
  </div>
</div>
